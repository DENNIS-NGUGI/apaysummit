{% extends 'invoices/base.html' %}
{% load static %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2><i class="fas fa-credit-card me-2"></i>Payment Process Guide</h2>
            <div>
                <a href="{% url 'help_manual' %}" class="btn btn-secondary me-2">
                    <i class="fas fa-arrow-left me-1"></i>Back to Help
                </a>
                <a href="{% url 'invoices_list' %}" class="btn btn-success">
                    <i class="fas fa-upload me-1"></i>Upload Payment
                </a>
            </div>
        </div>

        <!-- Payment Methods -->
        <div class="card border-dark shadow-sm mb-4">
            <div class="card-header text-white" style="background: linear-gradient(135deg, #198754 0%, #0f5132 100%);">
                <h4 class="mb-0"><i class="fas fa-university me-2"></i>Payment Methods Available</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div class="d-flex">
                            <i class="fas fa-university fa-2x text-success me-3"></i>
                            <div>
                                <h5 class="text-success">Bank Transfer</h5>
                                <p class="mb-1"><strong>Account Name:</strong> ICT AUTHORITY APAY SUMMIT</p>
                                <p class="mb-1"><strong>Bank:</strong> KENYA COMMERCIAL BANK-KSHs</p>
                                <p class="mb-1"><strong>Branch:</strong> KIPANDE HOUSE</p>
                                <p class="mb-1"><strong>Account No:</strong> 1303722755</p>
                                <p class="mb-0"><strong>SWIFT Code:</strong> KCBLKEN</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="d-flex">
                            <i class="fas fa-mobile-alt fa-2x text-primary me-3"></i>
                            <div>
                                <h5 class="text-primary">Mobile Money</h5>
                                <p class="mb-1"><strong>PayBill Number:</strong> 522522</p>
                                <p class="mb-1"><strong>Account Number:</strong> 1303722755</p>
                                <p class="mb-3 text-muted"><small>M-Pesa → Lipa na M-Pesa → PayBill → 522522 → Account 1303722755</small></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-dark" style="background-color: #000000; color: white;">
                    <strong><i class="fas fa-info-circle me-2"></i>Important:</strong> 
                    Always include your <strong>invoice number</strong> in the payment reference for easy identification.
                </div>
            </div>
        </div>

        <!-- Upload Process -->
        <div class="card border-dark shadow-sm mb-4">
            <div class="card-header text-white" style="background-color: #dc3545;">
                <h4 class="mb-0"><i class="fas fa-upload me-2"></i>How to Upload Proof of Payment</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 text-center mb-4">
                        <div class="step-icon">1</div>
                        <h5 class="mt-3">Access Your Invoice</h5>
                        <p class="text-muted">Go to "My Invoices" and click "View" on the invoice you want to update.</p>
                    </div>
                    <div class="col-md-4 text-center mb-4">
                        <div class="step-icon">2</div>
                        <h5 class="mt-3">Click Upload Button</h5>
                        <p class="text-muted">In the invoice list, click the "Pay" button or find the upload section in invoice details.</p>
                    </div>
                    <div class="col-md-4 text-center mb-4">
                        <div class="step-icon">3</div>
                        <h5 class="mt-3">Fill Payment Details</h5>
                        <p class="text-muted">Select payment method, upload proof file, and add reference notes.</p>
                    </div>
                </div>
                
                <div class="row mt-4">
                    <div class="col-md-6">
                        <h6 class="text-danger">Accepted File Formats</h6>
                        <ul>
                            <li>PDF documents (.pdf)</li>
                            <li>Image files (.jpg, .jpeg, .png, .gif)</li>
                            <li>Maximum file size: 5MB</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-danger">Required Information</h6>
                        <ul>
                            <li>Proof of payment file</li>
                            <li>Payment method used</li>
                            <li>Payment reference/transaction ID</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Verification Process -->
        <div class="card border-dark shadow-sm mb-4">
            <div class="card-header text-white" style="background-color: #6c757d;">
                <h4 class="mb-0"><i class="fas fa-check-double me-2"></i>Payment Verification Process</h4>
            </div>
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h5 class="text-dark">What Happens After Upload?</h5>
                        <ol>
                            <li><strong>Status Change:</strong> Invoice status changes to "Under Review"</li>
                            <li><strong>Admin Verification:</strong> Our team manually verifies your payment proof</li>
                            <li><strong>Confirmation:</strong> Once verified, status changes to "Paid"</li>
                            <li><strong>Notification:</strong> You'll see the updated status in your invoice list</li>
                        </ol>
                        <div class="alert alert-info">
                            <i class="fas fa-clock me-2"></i>
                            <strong>Processing Time:</strong> Verification typically takes 24-48 hours during business days.
                        </div>
                    </div>
                    <div class="col-md-4 text-center">
                        <i class="fas fa-user-check fa-5x text-muted"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Troubleshooting -->
        <div class="card border-warning shadow-sm">
            <div class="card-header text-dark bg-warning">
                <h5 class="mb-0"><i class="fas fa-exclamation-triangle me-2"></i>Troubleshooting Common Issues</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>File Upload Problems</h6>
                        <ul>
                            <li><strong>File too large:</strong> Ensure file is under 5MB</li>
                            <li><strong>Wrong format:</strong> Use PDF, JPG, PNG, or GIF</li>
                            <li><strong>Upload failed:</strong> Check your internet connection</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Status Not Updating</h6>
                        <ul>
                            <li><strong>Under Review:</strong> Normal processing time is 1-2 days</li>
                            <li><strong>Still Pending:</strong> Ensure you clicked "Upload Proof"</li>
                            <li><strong>Contact Support:</strong> If status doesn't update after 3 days</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="text-center mt-4">
            <a href="{% url 'invoices_list' %}" class="btn btn-success btn-lg me-3">
                <i class="fas fa-upload me-1"></i>Upload Payment Proof Now
            </a>
            <a href="{% url 'invoice_guide' %}" class="btn btn-outline-secondary me-2">
                <i class="fas fa-arrow-left me-1"></i>Previous
            </a>
            <a href="{% url 'help_manual' %}" class="btn btn-outline-secondary">
                <i class="fas fa-life-ring me-1"></i>Help Center
            </a>
        </div>
    </div>
</div>

<style>
.step-icon {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #dc3545 0%, #b02a37 100%);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: bold;
    margin: 0 auto;
}

.card {
    border-radius: 10px;
}
</style>
{% endblock %}